"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const d=require("react"),_=require("@ecency/render-helper"),H=require("clsx"),A=require("medium-zoom"),a=require("react/jsx-runtime"),u=require("react-dom/client");function W({containerRef:s}){const r=d.useRef(void 0);return d.useEffect(()=>{var n,t,o;return Array.from(((n=s.current)==null?void 0:n.querySelectorAll(".markdown-view:not(.markdown-view-pure) img"))??[]).filter(c=>{var i;return((i=c.parentNode)==null?void 0:i.nodeName)!=="A"&&!c.classList.contains("medium-zoom-image")&&!c.closest(".markdown-image-container")}).forEach(c=>{var v,y,L,j;const i=document.createElement("div");i.classList.add("markdown-image-container");const l=c.cloneNode(!0),p=(v=c.getAttribute("title"))==null?void 0:v.trim(),m=(y=c.getAttribute("data-caption"))==null?void 0:y.trim(),h=(L=c.getAttribute("alt"))==null?void 0:L.trim(),w=h?/^[\w,\s-]+\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i.test(h):!1,f=p||m||(w?"":h);if(f){const x=document.createElement("div");x.classList.add("markdown-img-caption"),x.innerText=f,i.appendChild(l),i.appendChild(x)}else i.appendChild(l);(j=c.parentElement)==null||j.replaceChild(i,c)}),r.current=A(((t=s.current)==null?void 0:t.querySelectorAll(".markdown-view:not(.markdown-view-pure) img"))??[]),(o=r.current)==null||o.update({background:"#131111"}),()=>{var c;(c=r.current)==null||c.detach()}},[]),a.jsx(a.Fragment,{})}function k(s){try{const r=new URL(s,"https://ecency.com").pathname.split("/").filter(Boolean).pop()??"";return r.includes("re-ecencywaves")||r.includes("re-leothreads")||r.startsWith("wave-")||r.startsWith("re-liketu-moments")}catch{return!1}}const M=".markdown-view:not(.markdown-view-pure) a",F=new Set(["ecency.com","www.ecency.com","peakd.com","www.peakd.com","hive.blog","www.hive.blog"]);function U(s){return s.trim().replace(/^https?:\/\/(www\.)?(ecency\.com|peakd\.com|hive\.blog)/i,"").replace(/^\/+/,"").split("?")[0].replace(/#@.*$/i,"").replace(/\/+$/,"").toLowerCase()}function g(s){return Array.from(s.querySelectorAll(M)).filter(e=>{if((e.dataset.isInline??"").toLowerCase()==="true")return!1;if(e.dataset.postLinkChecked==="true")return e.classList.contains("markdown-post-link");if(e.dataset.postLinkChecked="true",(e.dataset.isInline??"").toLowerCase()==="true")return!1;if(e.classList.contains("markdown-post-link"))return!0;const n=e.getAttribute("href")??"";if(!n)return!1;try{const t=new URL(n,"https://ecency.com");if(t.protocol&&!/^https?:$/.test(t.protocol)||t.hostname&&t.hostname!==""&&!F.has(t.hostname)||t.hash.startsWith("#@"))return!1;const o=t.pathname.split("/").filter(Boolean);if(o.length<2)return!1;const c=decodeURIComponent(o.pop()??""),i=decodeURIComponent(o.pop()??"");if(!i.startsWith("@")||!c||!(o.length===0||o.length===1&&o[0].toLowerCase().startsWith("hive-")))return!1;const p=U(e.innerText),m=`${i}/${c}`.toLowerCase(),h=o.length===1?decodeURIComponent(o[0]).toLowerCase():void 0,w=new Set([m]);return h&&w.add(`${h}/${m}`),e.innerText.trim()===n.trim()||w.has(p)?(e.classList.add("markdown-post-link"),!0):!1}catch{return!1}})}const b=new Map;function S(s){try{const r=new URL(`https://ecency.com${s}`).pathname.split("/"),e=decodeURIComponent(r[3]||""),n=/\.(jpg|jpeg|png|gif|webp|svg)$/i.test(e),t=/[?#]/.test(e);return!/^[a-z0-9-]+$/.test(e)||n||t}catch{return!0}}function R({link:s}){const[r,e]=d.useState(),n=d.useMemo(()=>new URL(s,"https://ecency.com"),[s]),t=n.pathname.toLowerCase(),o=d.useCallback(async()=>{var i,l,p,m;if(b.has(t)){e(b.get(t));return}if(S(t)){console.warn("[Ecency Renderer] Skipping invalid post link:",t);return}try{const w=await(await fetch(`https://ecency.com${t}`,{method:"GET"})).text(),f=document.createElement("html");f.innerHTML=w;const v=(i=f.querySelector('meta[property="og:title"]'))==null?void 0:i.getAttribute("content");if(v){const y={title:v,description:((p=(l=f.querySelector('meta[property="og:description"]'))==null?void 0:l.getAttribute("content"))==null?void 0:p.substring(0,71))??void 0,image:((m=f.querySelector('meta[property="og:image"]'))==null?void 0:m.getAttribute("content"))??void 0};b.set(t,y),e(y)}}catch(h){console.error(`[Ecency Renderer] Failed to fetch preview: ${s}`,h)}},[t,s]);d.useEffect(()=>{o()},[o]);const c=d.useMemo(()=>{const i=new URL(n.href),l=i.searchParams.get("referral");return`${i.pathname}${l?`?referral=${l}`:""}${i.hash}`},[n]);return a.jsx("a",{href:c,className:"ecency-renderer-hive-post-extension-link",target:"_blank",rel:"noopener",children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"ecency-renderer-hive-post-extension-link-image",style:{backgroundImage:`url(${r.image})`}}),a.jsxs("div",{className:"ecency-renderer-hive-post-extension-link-text-content",children:[a.jsx("div",{className:"ecency-renderer-hive-post-extension-link-type",children:"Hive post"}),a.jsx("div",{className:"ecency-renderer-hive-post-extension-link-title",children:r.title}),a.jsx("div",{className:"ecency-renderer-hive-post-extension-link-description",children:r.description+"..."})]})]}):s})}function B({containerRef:s}){return d.useEffect(()=>{const r=s.current;r&&g(r).filter(e=>!k(e.getAttribute("href")??"")).filter(e=>{try{const n=new URL(e.getAttribute("href")??"","https://ecency.com");return!S(n.pathname)}catch{return!1}}).forEach(e=>{var c;if(e.dataset.enhanced==="true")return;e.dataset.enhanced="true";const n=document.createElement("div");n.classList.add("ecency-renderer-hive-post-extension");const t=e.getAttribute("href")??"";u.createRoot(n).render(a.jsx(R,{link:t})),(c=e.parentElement)==null||c.replaceChild(n,e)})},[]),null}function C({author:s}){const r=`https://images.ecency.com/u${s.toLowerCase().replace("@","")}/avatar/small`;return a.jsxs(a.Fragment,{children:[a.jsx("img",{src:r,className:"ecency-renderer-author-extension-link-image",alt:s}),a.jsxs("div",{className:"ecency-renderer-author-extension-link-content",children:[a.jsx("span",{className:"ecency-renderer-author-extension-link-content-label",children:"Hive account"}),a.jsx("span",{children:s.toLowerCase().replace("/","")})]})]})}function O({containerRef:s}){return d.useEffect(()=>{var e;Array.from(((e=s.current)==null?void 0:e.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-author-link"))??[]).forEach(n=>{var i;if(n.dataset.enhanced==="true")return;const t=n.getAttribute("href");if(!t)return;const o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("target","_blank"),o.setAttribute("rel","noopener"),o.classList.add("ecency-renderer-author-extension"),o.classList.add("ecency-renderer-author-extension-link"),u.createRoot(o).render(a.jsx(C,{author:t})),(i=n.parentElement)==null||i.replaceChild(o,n),o.dataset.enhanced="true"})},[]),null}function z({tag:s}){return a.jsx("span",{children:s.replace("/","")})}function D({containerRef:s}){return d.useEffect(()=>{var e;Array.from(((e=s.current)==null?void 0:e.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-tag-link"))??[]).forEach(n=>{var c;const t=document.createElement("a");t.setAttribute("href",n.getAttribute("href")??""),t.setAttribute("target","_blank"),t.setAttribute("rel","noopener"),t.classList.add("ecency-renderer-tag-extension"),t.classList.add("ecency-renderer-tag-extension-link"),u.createRoot(t).render(a.jsx(z,{tag:n.innerText})),(c=n.parentElement)==null||c.replaceChild(t,n)})},[]),null}function N(s){try{const r=new URL(s);let e="";if(r.hostname==="youtu.be"?e=r.pathname.slice(1):r.pathname.startsWith("/shorts/")?e=r.pathname.split("/shorts/")[1]:r.pathname.startsWith("/embed/")?e=r.pathname.split("/embed/")[1]:e=r.searchParams.get("v")??"",!e)return"";const n=new URLSearchParams,t=r.searchParams.get("t")||r.searchParams.get("start")||r.searchParams.get("time_continue");if(t){const i=V(t);i&&n.set("start",i.toString())}const o=r.searchParams.get("list");o&&n.set("list",o),n.set("rel","0"),n.set("modestbranding","1");const c=n.toString();return`https://www.youtube.com/embed/${e}${c?`?${c}`:""}`}catch{return""}}function V(s){const r=/(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?/,e=s.match(r);if(e&&(e[1]||e[2]||e[3])){const t=parseInt(e[1]||"0",10),o=parseInt(e[2]||"0",10),c=parseInt(e[3]||"0",10);return t*3600+o*60+c}const n=parseInt(s,10);return Number.isNaN(n)?void 0:n}function T({embedSrc:s,container:r}){const[e,n]=d.useState(!1);return d.useEffect(()=>{const t=()=>n(!0);return r.addEventListener("click",t),()=>r.removeEventListener("click",t)},[]),d.useEffect(()=>{if(e){const t=r.querySelector(".video-thumbnail"),o=r.querySelector(".markdown-video-play");t&&(t.style.display="none"),o&&(o.style.display="none")}},[e]),e?a.jsx("iframe",{className:"youtube-shorts-iframe",src:s,title:"Video player",frameBorder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):null}function Y({containerRef:s}){return d.useEffect(()=>{var e;Array.from(((e=s.current)==null?void 0:e.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-video-link-youtube:not(.ecency-renderer-youtube-extension)"))??[]).forEach(n=>{const t=n.dataset.embedSrc||N(n.getAttribute("href")??"");n.dataset.embedSrc=t;const o=document.createElement("div");o.classList.add("ecency-renderer-youtube-extension-frame"),n.classList.add("ecency-renderer-youtube-extension"),u.hydrateRoot(o,a.jsx(T,{embedSrc:t,container:n})),n.appendChild(o)})},[]),a.jsx(a.Fragment,{})}const E=new Map;async function Z(s,r){if(E.has(`${s}/${r}`))return E.get(`${s}/${r}`);const e=await window.dHiveClient.call("condenser_api","get_content",[s,r]);return E.set(`${s}/${r}`,e),e}const K='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 148.85 148.85"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><circle class="ecency-logo-circle" cx="74.43" cy="74.43" r="74.43"/><path class="ecency-logo-sign" d="M88.27,105.71c-9,.08-30.35.27-35.13-.29-3.88-.46-11-3-11.11-12.81C42,87,41.66,64,42.46,59,44.13,48.4,47,41.77,59.05,36.33c10.26-4.44,32.17-.78,34.54,16.93.45,3.37,1.25,3.74,2.49,4,19.61,4.13,24,26.26,14.6,38.32C104.73,103.26,98.31,104.76,88.27,105.71ZM84.71,59.25c.68-11.52-11-19.82-22.82-13.66-8.42,4.39-9.15,10.76-9.68,18-.67,9.2-.25,15.91-.09,25.13.07,4.13,1.27,6.64,5.7,7,1.14.1,17,0,25.22.06,10.74.06,24.06-4.89,21.93-18a12.68,12.68,0,0,0-10.8-10.22,2.12,2.12,0,0,0-2.21,1C85,83,69.66,82.31,63.41,74.46c-5.61-7.06-2.7-18.73,4.68-21.2,2.78-.94,5.11-.11,6.25,1.86,1.84,3.18.11,6.06-2.49,7.65s-2.45,3.92-1.36,5.46c2.56,3.59,7.6,2.88,10.79-.28C83.87,65.4,84.52,62.47,84.71,59.25Z"/></g></g></svg>';function $({link:s}){const[r,e]=d.useState(),n=d.useMemo(()=>{var o,c,i,l;return(o=r==null?void 0:r.permlink)!=null&&o.startsWith("re-ecencywaves")||(c=r==null?void 0:r.permlink)!=null&&c.startsWith("wave-")?"ecency.waves":(i=r==null?void 0:r.permlink)!=null&&i.startsWith("re-leothreads")?"threads":(l=r==null?void 0:r.permlink)!=null&&l.startsWith("re-liketu-moments")?"moments":""},[r]);if(d.useEffect(()=>{const[o,c,i,l,p]=new URL(s,"https://ecency.com").pathname.split("/");Z(l.replace("@",""),p).then(m=>{e(m)}).catch(m=>console.error(m))},[]),!r)return a.jsx(a.Fragment,{});const t=`/waves/${r.author}/${r.permlink}`;return a.jsxs("article",{className:"ecency-renderer-wave-like-post-extension-renderer",children:[a.jsx("a",{href:t,"aria-label":`Open wave by @${r.author}`,className:"ecency-renderer-wave-like-post-extension-renderer__overlay"}),a.jsxs("div",{className:"ecency-renderer-wave-like-post-extension-renderer--author",children:[a.jsx("img",{src:`https://images.ecency.com/u/${r.author}/avatar/small`,alt:r.author,className:"ecency-renderer-wave-like-post-extension-renderer--author-avatar"}),a.jsxs("div",{className:"ecency-renderer-wave-like-post-extension-renderer--author-content",children:[a.jsxs("a",{className:"ecency-renderer-wave-like-post-extension-renderer--author-content-link",href:`/@${r.author}/posts`,children:["@",r.author]}),a.jsxs("div",{className:"ecency-renderer-wave-like-post-extension-renderer--author-content-host",children:["#",n]})]})]}),a.jsx("a",{href:"https://ecency.com",className:"ecency-renderer-wave-like-post-extension-renderer--logo",dangerouslySetInnerHTML:{__html:K}}),a.jsx("div",{className:"ecency-renderer-wave-like-post-extension-renderer--body",children:a.jsx(I,{value:r.body})})]})}function G({containerRef:s}){return d.useEffect(()=>{const r=s.current;r&&g(r).filter(e=>k(e.getAttribute("href")??"")).forEach(e=>{var t;const n=document.createElement("div");n.classList.add("ecency-renderer-wave-like-extension"),u.hydrateRoot(n,a.jsx($,{link:e.getAttribute("href")??""})),(t=e.parentElement)==null||t.replaceChild(n,e)})},[]),a.jsx(a.Fragment,{})}function q({op:s}){const r=d.useMemo(()=>{try{const n=atob(s);return JSON.parse(n)}catch{return}},[s]),e=d.useMemo(()=>r==null?void 0:r[0].split("_").join(" "),[r]);return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"ecency-renderer-hive-operation-extension-label",children:"Hive operation, click to Sign"}),!r&&s,a.jsx("div",{className:"ecency-renderer-hive-operation-extension-content",children:r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"ecency-renderer-hive-operation-extension-type",children:e}),e==="transfer"&&a.jsxs("div",{className:"ecency-renderer-hive-operation-extension-transfer",children:[a.jsx("span",{className:"ecency-renderer-hive-operation-extension-transfer-highlight",children:r[1].amount}),a.jsx("span",{children:" to"}),a.jsx("img",{src:`https://images.ecency.com/u/${r[1].to}/avatar/small`,className:"ecency-renderer-hive-operation-extension-transfer-image",alt:""}),a.jsx("span",{className:"ecency-renderer-hive-operation-extension-transfer-highlight",children:r[1].to})]})]})})]})}function J({containerRef:s,onClick:r}){return d.useEffect(()=>{var e;Array.from(((e=s.current)==null?void 0:e.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-external-link"))??[]).filter(n=>{var t;return(t=n.innerText)==null?void 0:t.startsWith("hive://sign/op/")}).forEach(n=>{var i;const t=document.createElement("div");t.classList.add("ecency-renderer-hive-operation-extension");const o=n.innerText.replace("hive://sign/op/","");t.addEventListener("click",()=>r==null?void 0:r(o)),u.createRoot(t).render(a.jsx(q,{op:o})),(i=n.parentElement)==null||i.replaceChild(t,n)})},[s,r]),null}function Q({containerRef:s,ComponentInstance:r}){return d.useEffect(()=>{var n;Array.from(((n=s.current)==null?void 0:n.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-external-link"))??[]).filter(t=>{const o=t.getAttribute("href")||"";return o.startsWith("https://x.com")||o.startsWith("https://twitter.com")}).forEach(t=>{try{const o=t.getAttribute("href");if(!o)return;const i=new URL(o).pathname.split("/").pop();if(!i)return;const l=document.createElement("div");l.classList.add("ecency-renderer-twitter-extension-frame"),t.classList.add("ecency-renderer-twitter-extension"),t.innerHTML="",t.appendChild(l),u.createRoot(l).render(a.jsx(r,{id:i}))}catch(o){console.warn("TwitterExtension failed to render tweet:",o)}})},[s]),null}function P({embedSrc:s,container:r}){const[e,n]=d.useState(!1);return d.useEffect(()=>{const t=()=>n(!0);return r.addEventListener("click",t),()=>r.removeEventListener("click",t)},[]),d.useEffect(()=>{if(e){const t=r.querySelector(".video-thumbnail"),o=r.querySelector(".markdown-video-play");t&&(t.style.display="none"),o&&(o.style.display="none")}},[e]),e?a.jsx("iframe",{className:"speak-iframe",src:s,title:"3Speak video",frameBorder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):null}function X({containerRef:s}){return d.useEffect(()=>{var e;Array.from(((e=s.current)==null?void 0:e.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-video-link-speak:not(.ecency-renderer-speak-extension)"))??[]).forEach(n=>{const t=document.createElement("div");t.classList.add("ecency-renderer-speak-extension-frame"),n.classList.add("ecency-renderer-speak-extension"),u.hydrateRoot(t,a.jsx(P,{embedSrc:n.dataset.embedSrc??"",container:n})),n.appendChild(t)})},[]),a.jsx(a.Fragment,{})}function I({value:s,pure:r=!1,onHiveOperationClick:e,TwitterComponent:n=()=>a.jsx("div",{children:"No twitter component"}),...t}){const o=d.useRef(null);return a.jsxs(a.Fragment,{children:[a.jsx("div",{...t,ref:o,itemProp:"articleBody",className:H.clsx("entry-body markdown-view user-selectable",r?"markdown-view-pure":"",t.className),dangerouslySetInnerHTML:{__html:_.renderPostBody(s,!1)}}),!r&&a.jsxs(a.Fragment,{children:[a.jsx(W,{containerRef:o}),a.jsx(B,{containerRef:o}),a.jsx(O,{containerRef:o}),a.jsx(D,{containerRef:o}),a.jsx(Y,{containerRef:o}),a.jsx(X,{containerRef:o}),a.jsx(G,{containerRef:o}),a.jsx(Q,{containerRef:o,ComponentInstance:n}),a.jsx(J,{containerRef:o,onClick:e})]})]})}function ee(s){Array.from(s.querySelectorAll(".markdown-view:not(.markdown-view-pure) img")).filter(n=>{var t;return((t=n.parentNode)==null?void 0:t.nodeName)!=="A"&&!n.classList.contains("medium-zoom-image")&&!n.closest(".markdown-image-container")}).forEach(n=>{var h,w,f,v;const t=document.createElement("div");t.classList.add("markdown-image-container");const o=n.cloneNode(!0),c=(h=n.getAttribute("title"))==null?void 0:h.trim(),i=(w=n.getAttribute("data-caption"))==null?void 0:w.trim(),l=(f=n.getAttribute("alt"))==null?void 0:f.trim(),p=l?/^[\w,\s-]+\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i.test(l):!1,m=c||i||(p?"":l);if(m){const y=document.createElement("div");y.classList.add("markdown-img-caption"),y.innerText=m,t.appendChild(o),t.appendChild(y)}else t.appendChild(o);(v=n.parentElement)==null||v.replaceChild(t,n)}),A(s.querySelectorAll(".markdown-view:not(.markdown-view-pure) img")).update({background:"#131111"})}function te(s,r=g(s)){r.filter(e=>e.dataset.isInline!=="true").filter(e=>!k(e.getAttribute("href")??"")).forEach(e=>{var c;if(e.dataset.enhanced==="true")return;e.dataset.enhanced="true";const n=e.getAttribute("href")??"",t=document.createElement("div");t.classList.add("ecency-renderer-hive-post-extension"),u.createRoot(t).render(a.jsx(R,{link:n})),(c=e.parentElement)==null||c.replaceChild(t,e)})}function re(s,r){Array.from(s.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-external-link")).filter(e=>e.innerText.startsWith("hive://sign/op/")).forEach(e=>{var c;if(e.dataset.enhanced==="true")return;e.dataset.enhanced="true";const n=e.innerText.replace("hive://sign/op/",""),t=document.createElement("div");t.classList.add("ecency-renderer-hive-operation-extension"),t.addEventListener("click",()=>r==null?void 0:r(n)),u.createRoot(t).render(a.jsx(q,{op:n})),(c=e.parentElement)==null||c.replaceChild(t,e)})}function ne(s){Array.from(s.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-author-link")).forEach(e=>{var c;if(e.dataset.enhanced==="true")return;e.dataset.enhanced="true";const n=e.getAttribute("href");if(!n)return;const t=document.createElement("a");t.href=n,t.target="_blank",t.rel="noopener",t.classList.add("ecency-renderer-author-extension","ecency-renderer-author-extension-link"),u.createRoot(t).render(a.jsx(C,{author:n})),(c=e.parentElement)==null||c.replaceChild(t,e)})}function se(s){s.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-tag-link").forEach(e=>{e.classList.add("ecency-renderer-tag-link-enhanced")})}function ae(s){Array.from(s.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-video-link-youtube:not(.ecency-renderer-youtube-extension)")).forEach(e=>{if(e.dataset.enhanced==="true")return;e.dataset.enhanced="true";const n=e.dataset.embedSrc||N(e.getAttribute("href")??"");e.dataset.embedSrc=n;const t=document.createElement("div");t.classList.add("ecency-renderer-youtube-extension-frame"),u.createRoot(t).render(a.jsx(T,{embedSrc:n,container:e})),e.appendChild(t)})}function oe(s){Array.from(s.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-video-link-speak:not(.ecency-renderer-speak-extension)")).forEach(e=>{if(e.dataset.enhanced==="true")return;e.dataset.enhanced="true";const n=e.dataset.embedSrc??"",t=document.createElement("div");t.classList.add("ecency-renderer-speak-extension-frame"),u.createRoot(t).render(a.jsx(P,{embedSrc:n,container:e})),e.appendChild(t)})}function ce(s,r){Array.from(s.querySelectorAll(".markdown-view:not(.markdown-view-pure) .markdown-external-link")).filter(n=>{const t=n.getAttribute("href")||"";if(!t.startsWith("https://x.com")&&!t.startsWith("https://twitter.com"))return!1;try{const c=new URL(t).pathname.split("/").filter(Boolean);return c.length>=3&&c[1]==="status"&&/^\d+$/.test(c[2])}catch{return!1}}).forEach(n=>{try{if(n.dataset.enhanced==="true")return;n.dataset.enhanced="true";const t=n.getAttribute("href");if(!t)return;const i=new URL(t).pathname.split("/").filter(Boolean)[2];if(!i)return;const l=document.createElement("div");l.classList.add("ecency-renderer-twitter-extension-frame"),n.innerHTML="",n.appendChild(l),u.createRoot(l).render(a.jsx(r,{id:i}))}catch(t){console.warn("applyTwitterEmbeds failed to render tweet:",t)}})}function ie(s,r=g(s)){r.filter(e=>e.dataset.isInline!=="true").filter(e=>k(e.getAttribute("href")??"")).forEach(e=>{var c;if(e.dataset.enhanced==="true")return;e.dataset.enhanced="true";const n=e.getAttribute("href")??"",t=document.createElement("div");t.classList.add("ecency-renderer-wave-like-extension"),u.createRoot(t).render(a.jsx($,{link:n})),(c=e.parentElement)==null||c.replaceChild(t,e)})}function de(s,r){ee(s);const e=g(s);te(s,e),ne(s),re(s,r==null?void 0:r.onHiveOperationClick),se(s),ae(s),oe(s),ie(s,e),ce(s,(r==null?void 0:r.TwitterComponent)??(()=>"<div>Failed to render Twitter</div>"))}exports.EcencyRenderer=I;exports.setupPostEnhancements=de;
